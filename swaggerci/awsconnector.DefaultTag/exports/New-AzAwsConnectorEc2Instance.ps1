
# ----------------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for license information.
# Code generated by Microsoft (R) AutoRest Code Generator.
# Changes may cause incorrect behavior and will be lost if the code is regenerated.
# ----------------------------------------------------------------------------------

<#
.Synopsis
Create a Ec2Instance.
Please note that end user resource creation is currently restricted, but it will be enabled in the future.
.Description
Create a Ec2Instance.
Please note that end user resource creation is currently restricted, but it will be enabled in the future.
.Example
{{ Add code here }}
.Example
{{ Add code here }}

.Outputs
Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Models.Api20241201.IEc2Instance
.Notes
COMPLEX PARAMETER PROPERTIES

To create the parameters described below, construct a hash table containing the appropriate properties. For information on hash tables, run Get-Help about_Hash_Tables.

AWSPROPERTY <IAwsEc2InstanceProperties>: AWS Properties
  [AmdSevSnpValue <AmdSevSnpSpecification?>]: Property value
  [AmiLaunchIndex <Int32?>]: <p>The AMI launch index, which can be used to find this instance in the launch group.</p>
  [ArchitectureValue <ArchitectureValues?>]: Property value
  [AutoRecoveryValue <InstanceAutoRecoveryState?>]: Property value
  [BlockDeviceMapping <IInstanceBlockDeviceMapping[]>]: <p>Any block device mapping entries for the instance.</p>
    [DeviceName <String>]: <p>The device name (for example, <code>/dev/sdh</code> or <code>xvdh</code>).</p>
    [EbAssociatedResource <String>]: <p>The ARN of the Amazon ECS or Fargate task to which the volume is attached.</p>
    [EbAttachTime <DateTime?>]: <p>The time stamp when the attachment initiated.</p>
    [EbDeleteOnTermination <Boolean?>]: <p>Indicates whether the volume is deleted on instance termination.</p>
    [EbVolumeId <String>]: <p>The ID of the EBS volume.</p>
    [EbVolumeOwnerId <String>]: <p>The ID of the Amazon Web Services account that owns the volume.</p> <p>This parameter is returned only for volumes that are attached to Fargate tasks.</p>
    [StatusValue <AttachmentStatus?>]: Property value
  [BootModeValue <BootModeValues?>]: Property value
  [CapacityReservationId <String>]: <p>The ID of the Capacity Reservation.</p>
  [CapacityReservationPreferenceValue <CapacityReservationPreference?>]: Property value
  [CapacityReservationTargetCapacityReservationId <String>]: <p>The ID of the targeted Capacity Reservation.</p>
  [CapacityReservationTargetCapacityReservationResourceGroupArn <String>]: <p>The ARN of the targeted Capacity Reservation group.</p>
  [ClientToken <String>]: <p>The idempotency token you provided when you launched the instance, if applicable.</p>
  [CpuOptionCoreCount <Int32?>]: <p>The number of CPU cores for the instance.</p>
  [CpuOptionThreadsPerCore <Int32?>]: <p>The number of threads per CPU core.</p>
  [CurrentInstanceBootModeValue <InstanceBootModeValues?>]: Property value
  [EbsOptimized <Boolean?>]: <p>Indicates whether the instance is optimized for Amazon EBS I/O. This optimization provides dedicated throughput to Amazon EBS and an optimized configuration stack to provide optimal I/O performance. This optimization isn't available with all instance types. Additional usage charges apply when using an EBS Optimized instance.</p>
  [ElasticGpuAssociation <IElasticGpuAssociation[]>]: <p>Deprecated.</p> <note> <p>Amazon Elastic Graphics reached end of life on January 8, 2024. For workloads that require graphics acceleration, we recommend that you use Amazon EC2 G4ad, G4dn, or G5 instances.</p> </note>
    [ElasticGpuId <String>]: <p>The ID of the Elastic Graphics accelerator.</p>
    [Id <String>]: <p>The ID of the association.</p>
    [State <String>]: <p>The state of the association between the instance and the Elastic Graphics accelerator.</p>
    [Time <String>]: <p>The time the Elastic Graphics accelerator was associated with the instance.</p>
  [ElasticInferenceAcceleratorAssociation <IElasticInferenceAcceleratorAssociation[]>]: <p>The elastic inference accelerator associated with the instance.</p>
    [ElasticInferenceAcceleratorArn <String>]: <p> The Amazon Resource Name (ARN) of the elastic inference accelerator. </p>
    [Id <String>]: <p> The ID of the association. </p>
    [State <String>]: <p> The state of the elastic inference accelerator. </p>
    [Time <DateTime?>]: <p> The time at which the elastic inference accelerator is associated with an instance. </p>
  [EnaSupport <Boolean?>]: <p>Specifies whether enhanced networking with ENA is enabled.</p>
  [EnclaveOptionEnabled <Boolean?>]: <p>If this parameter is set to <code>true</code>, the instance is enabled for Amazon Web Services Nitro Enclaves; otherwise, it is not enabled for Amazon Web Services Nitro Enclaves.</p>
  [HibernationOptionConfigured <Boolean?>]: <p>If <code>true</code>, your instance is enabled for hibernation; otherwise, it is not enabled for hibernation.</p>
  [HostnameTypeValue <HostnameType?>]: Property value
  [HttpEndpointValue <InstanceMetadataEndpointState?>]: Property value
  [HttpProtocolIpv6Value <InstanceMetadataProtocolState?>]: Property value
  [HttpTokenValue <HttpTokensState?>]: Property value
  [HypervisorValue <HypervisorType?>]: Property value
  [IamInstanceProfileArn <String>]: <p>The Amazon Resource Name (ARN) of the instance profile.</p>
  [IamInstanceProfileId <String>]: <p>The ID of the instance profile.</p>
  [ImageId <String>]: <p>The ID of the AMI used to launch the instance.</p>
  [InstanceId <String>]: <p>The ID of the instance.</p>
  [InstanceLifecycleValue <InstanceLifecycleType?>]: Property value
  [InstanceMetadataTagValue <InstanceMetadataTagsState?>]: Property value
  [InstanceTypeValue <InstanceType?>]: Property value
  [Ipv6Address <String>]: <p>The IPv6 address assigned to the instance.</p>
  [KernelId <String>]: <p>The kernel associated with this instance, if applicable.</p>
  [KeyName <String>]: <p>The name of the key pair, if this instance was launched with an associated key pair.</p>
  [LaunchTime <DateTime?>]: <p>The time the instance was launched.</p>
  [License <ILicenseConfiguration[]>]: <p>The license configurations for the instance.</p>
    [Arn <String>]: <p>The Amazon Resource Name (ARN) of the license configuration.</p>
  [MetadataOptionHttpPutResponseHopLimit <Int32?>]: <p>The maximum number of hops that the metadata token can travel.</p> <p>Possible values: Integers from <code>1</code> to <code>64</code> </p>
  [MetadataOptionsStateValue <InstanceMetadataOptionsState?>]: Property value
  [MonitoringStateValue <MonitoringState?>]: Property value
  [NameValue <InstanceStateName?>]: Property value
  [NetworkInterface <IInstanceNetworkInterface[]>]: <p>The network interfaces for the instance.</p>
    [AssociationCarrierIP <String>]: <p>The carrier IP address associated with the network interface.</p>
    [AssociationCustomerOwnedIP <String>]: <p>The customer-owned IP address associated with the network interface.</p>
    [AssociationIPOwnerId <String>]: <p>The ID of the owner of the Elastic IP address.</p>
    [AssociationPublicDnsName <String>]: <p>The public DNS name.</p>
    [AssociationPublicIP <String>]: <p>The public IP address or Elastic IP address bound to the network interface.</p>
    [AttachmentAttachTime <DateTime?>]: <p>The time stamp when the attachment initiated.</p>
    [AttachmentDeleteOnTermination <Boolean?>]: <p>Indicates whether the network interface is deleted when the instance is terminated.</p>
    [AttachmentDeviceIndex <Int32?>]: <p>The index of the device on the instance for the network interface attachment.</p>
    [AttachmentId <String>]: <p>The ID of the network interface attachment.</p>
    [AttachmentNetworkCardIndex <Int32?>]: <p>The index of the network card.</p>
    [AttachmentStatusValue <AttachmentStatus?>]: Property value
    [ConnectionTrackingConfigurationTcpEstablishedTimeout <Int32?>]: <p>Timeout (in seconds) for idle TCP connections in an established state. Min: 60 seconds. Max: 432000 seconds (5 days). Default: 432000 seconds. Recommended: Less than 432000 seconds.</p>
    [ConnectionTrackingConfigurationUdpStreamTimeout <Int32?>]: <p>Timeout (in seconds) for idle UDP flows classified as streams which have seen more than one request-response transaction. Min: 60 seconds. Max: 180 seconds (3 minutes). Default: 180 seconds.</p>
    [ConnectionTrackingConfigurationUdpTimeout <Int32?>]: <p>Timeout (in seconds) for idle UDP flows that have seen traffic only in a single direction or a single request-response transaction. Min: 30 seconds. Max: 60 seconds. Default: 30 seconds.</p>
    [Description <String>]: <p>The description.</p>
    [EnaSrdSpecificationEnaSrdEnabled <Boolean?>]: <p>Indicates whether ENA Express is enabled for the network interface.</p>
    [EnaSrdUdpSpecificationEnaSrdUdpEnabled <Boolean?>]: <p>Indicates whether UDP traffic to and from the instance uses ENA Express. To specify this setting, you must first enable ENA Express.</p>
    [Group <IGroupIdentifier[]>]: <p>The security groups.</p>
      [GroupId <String>]: <p>The ID of the security group.</p>
      [GroupName <String>]: <p>The name of the security group.</p>
    [InterfaceType <String>]: <p>The type of network interface.</p> <p>Valid values: <code>interface</code> | <code>efa</code> | <code>trunk</code> </p>
    [Ipv4Prefix <IInstanceIpv4Prefix[]>]: <p>The IPv4 delegated prefixes that are assigned to the network interface.</p>
      [Ipv4Prefix <String>]: <p>One or more IPv4 prefixes assigned to the network interface.</p>
    [Ipv6Address <IInstanceIpv6Address[]>]: <p>The IPv6 addresses associated with the network interface.</p>
      [Ipv6Address <String>]: <p>The IPv6 address.</p>
      [IsPrimaryIpv6 <Boolean?>]: <p>Determines if an IPv6 address associated with a network interface is the primary IPv6 address. When you enable an IPv6 GUA address to be a primary IPv6, the first IPv6 GUA will be made the primary IPv6 address until the instance is terminated or the network interface is detached. For more information, see <a href='https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_RunInstances.html'>RunInstances</a>.</p>
    [Ipv6Prefix <IInstanceIpv6Prefix[]>]: <p>The IPv6 delegated prefixes that are assigned to the network interface.</p>
      [Ipv6Prefix <String>]: <p>One or more IPv6 prefixes assigned to the network interface.</p>
    [MacAddress <String>]: <p>The MAC address.</p>
    [NetworkInterfaceId <String>]: <p>The ID of the network interface.</p>
    [OwnerId <String>]: <p>The ID of the Amazon Web Services account that created the network interface.</p>
    [PrivateDnsName <String>]: <p>The private DNS name.</p>
    [PrivateIPAddress <String>]: <p>The IPv4 address of the network interface within the subnet.</p>
    [PrivateIPAddresses <IInstancePrivateIPAddress[]>]: <p>The private IPv4 addresses associated with the network interface.</p>
      [AssociationCarrierIP <String>]: <p>The carrier IP address associated with the network interface.</p>
      [AssociationCustomerOwnedIP <String>]: <p>The customer-owned IP address associated with the network interface.</p>
      [AssociationIPOwnerId <String>]: <p>The ID of the owner of the Elastic IP address.</p>
      [AssociationPublicDnsName <String>]: <p>The public DNS name.</p>
      [AssociationPublicIP <String>]: <p>The public IP address or Elastic IP address bound to the network interface.</p>
      [Primary <Boolean?>]: <p>Indicates whether this IPv4 address is the primary private IP address of the network interface.</p>
      [PrivateDnsName <String>]: <p>The private IPv4 DNS name.</p>
      [PrivateIPAddress <String>]: <p>The private IPv4 address of the network interface.</p>
    [SourceDestCheck <Boolean?>]: <p>Indicates whether source/destination checking is enabled.</p>
    [SubnetId <String>]: <p>The ID of the subnet.</p>
    [Value <NetworkInterfaceStatus?>]: Property value
    [VpcId <String>]: <p>The ID of the VPC.</p>
  [OutpostArn <String>]: <p>The Amazon Resource Name (ARN) of the Outpost.</p>
  [PlacementAffinity <String>]: <p>The affinity setting for the instance on the Dedicated Host.</p> <p>This parameter is not supported for <a href='https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CreateFleet'>CreateFleet</a> or <a href='https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_ImportInstance.html'>ImportInstance</a>.</p>
  [PlacementAvailabilityZone <String>]: <p>The Availability Zone of the instance.</p> <p>If not specified, an Availability Zone will be automatically chosen for you based on the load balancing criteria for the Region.</p> <p>This parameter is not supported for <a href='https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CreateFleet'>CreateFleet</a>.</p>
  [PlacementGroupId <String>]: <p>The ID of the placement group that the instance is in. If you specify <code>GroupId</code>, you can't specify <code>GroupName</code>.</p>
  [PlacementGroupName <String>]: <p>The name of the placement group that the instance is in. If you specify <code>GroupName</code>, you can't specify <code>GroupId</code>.</p>
  [PlacementHostId <String>]: <p>The ID of the Dedicated Host on which the instance resides.</p> <p>This parameter is not supported for <a href='https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CreateFleet'>CreateFleet</a> or <a href='https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_ImportInstance.html'>ImportInstance</a>.</p>
  [PlacementHostResourceGroupArn <String>]: <p>The ARN of the host resource group in which to launch the instances.</p> <p>If you specify this parameter, either omit the <b>Tenancy</b> parameter or set it to <code>host</code>.</p> <p>This parameter is not supported for <a href='https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CreateFleet'>CreateFleet</a>.</p>
  [PlacementPartitionNumber <Int32?>]: <p>The number of the partition that the instance is in. Valid only if the placement group strategy is set to <code>partition</code>.</p> <p>This parameter is not supported for <a href='https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CreateFleet'>CreateFleet</a>.</p>
  [PlacementSpreadDomain <String>]: <p>Reserved for future use.</p>
  [PlatformDetail <String>]: <p>The platform details value for the instance. For more information, see <a href='https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/billing-info-fields.html'>AMI billing information fields</a> in the <i>Amazon EC2 User Guide</i>.</p>
  [PlatformValue <PlatformValues?>]: Property value
  [PrivateDnsName <String>]: <p>[IPv4 only] The private DNS hostname name assigned to the instance. This DNS hostname can only be used inside the Amazon EC2 network. This name is not available until the instance enters the <code>running</code> state. </p> <p>The Amazon-provided DNS server resolves Amazon-provided private DNS hostnames if you've enabled DNS resolution and DNS hostnames in your VPC. If you are not using the Amazon-provided DNS server in your VPC, your custom domain name servers must resolve the hostname as appropriate.</p>
  [PrivateDnsNameOptionEnableResourceNameDnsARecord <Boolean?>]: <p>Indicates whether to respond to DNS queries for instance hostnames with DNS A records.</p>
  [PrivateDnsNameOptionEnableResourceNameDnsAaaaRecord <Boolean?>]: <p>Indicates whether to respond to DNS queries for instance hostnames with DNS AAAA records.</p>
  [PrivateIPAddress <String>]: <p>The private IPv4 address assigned to the instance.</p>
  [ProductCode <IProductCode[]>]: <p>The product codes attached to this instance, if applicable.</p>
    [Id <String>]: <p>The product code.</p>
    [TypeValue <ProductCodeValues?>]: Property value
  [PublicDnsName <String>]: <p>[IPv4 only] The public DNS name assigned to the instance. This name is not available until the instance enters the <code>running</code> state. This name is only available if you've enabled DNS hostnames for your VPC.</p>
  [PublicIPAddress <String>]: <p>The public IPv4 address, or the Carrier IP address assigned to the instance, if applicable.</p> <p>A Carrier IP address only applies to an instance launched in a subnet associated with a Wavelength Zone.</p>
  [RamdiskId <String>]: <p>The RAM disk associated with this instance, if applicable.</p>
  [RootDeviceName <String>]: <p>The device name of the root device volume (for example, <code>/dev/sda1</code>).</p>
  [RootDeviceTypeValue <DeviceType?>]: Property value
  [SecurityGroup <IGroupIdentifier[]>]: <p>The security groups for the instance.</p>
  [SourceDestCheck <Boolean?>]: <p>Indicates whether source/destination checking is enabled.</p>
  [SpotInstanceRequestId <String>]: <p>If the request is a Spot Instance request, the ID of the request.</p>
  [SriovNetSupport <String>]: <p>Specifies whether enhanced networking with the Intel 82599 Virtual Function interface is enabled.</p>
  [StateCode <Int32?>]: <p>The state of the instance as a 16-bit unsigned integer. </p> <p>The high byte is all of the bits between 2^8 and (2^16)-1, which equals decimal values between 256 and 65,535. These numerical values are used for internal purposes and should be ignored.</p> <p>The low byte is all of the bits between 2^0 and (2^8)-1, which equals decimal values between 0 and 255. </p> <p>The valid values for instance-state-code will all be in the range of the low byte and they are:</p> <ul> <li> <p> <code>0</code> : <code>pending</code> </p> </li> <li> <p> <code>16</code> : <code>running</code> </p> </li> <li> <p> <code>32</code> : <code>shutting-down</code> </p> </li> <li> <p> <code>48</code> : <code>terminated</code> </p> </li> <li> <p> <code>64</code> : <code>stopping</code> </p> </li> <li> <p> <code>80</code> : <code>stopped</code> </p> </li> </ul> <p>You can ignore the high byte value by zeroing out all of the bits above 2^8 or 256 in decimal.</p>
  [StateReasonCode <String>]: <p>The reason code for the state change.</p>
  [StateReasonMessage <String>]: <p>The message for the state change.</p> <ul> <li> <p> <code>Server.InsufficientInstanceCapacity</code>: There was insufficient capacity available to satisfy the launch request.</p> </li> <li> <p> <code>Server.InternalError</code>: An internal error caused the instance to terminate during launch.</p> </li> <li> <p> <code>Server.ScheduledStop</code>: The instance was stopped due to a scheduled retirement.</p> </li> <li> <p> <code>Server.SpotInstanceShutdown</code>: The instance was stopped because the number of Spot requests with a maximum price equal to or higher than the Spot price exceeded available capacity or because of an increase in the Spot price.</p> </li> <li> <p> <code>Server.SpotInstanceTermination</code>: The instance was terminated because the number of Spot requests with a maximum price equal to or higher than the Spot price exceeded available capacity or because of an increase in the Spot price.</p> </li> <li> <p> <code>Client.InstanceInitiatedShutdown</code>: The instance was shut down from the operating system of the instance.</p> </li> <li> <p> <code>Client.InstanceTerminated</code>: The instance was terminated or rebooted during AMI creation.</p> </li> <li> <p> <code>Client.InternalError</code>: A client error caused the instance to terminate during launch.</p> </li> <li> <p> <code>Client.InvalidSnapshot.NotFound</code>: The specified snapshot was not found.</p> </li> <li> <p> <code>Client.UserInitiatedHibernate</code>: Hibernation was initiated on the instance.</p> </li> <li> <p> <code>Client.UserInitiatedShutdown</code>: The instance was shut down using the Amazon EC2 API.</p> </li> <li> <p> <code>Client.VolumeLimitExceeded</code>: The limit on the number of EBS volumes or total storage was exceeded. Decrease usage or request an increase in your account limits.</p> </li> </ul>
  [StateTransitionReason <String>]: <p>The reason for the most recent state transition. This might be an empty string.</p>
  [SubnetId <String>]: <p>The ID of the subnet in which the instance is running.</p>
  [Tag <ITagAutoGenerated13[]>]: <p>Any tags assigned to the instance.</p>
    [Key <String>]: <p>The key of the tag.</p> <p>Constraints: Tag keys are case-sensitive and accept a maximum of 127 Unicode characters. May not begin with <code>aws:</code>.</p>
    [Value <String>]: <p>The value of the tag.</p> <p>Constraints: Tag values are case-sensitive and accept a maximum of 256 Unicode characters.</p>
  [TenancyValue <Tenancy?>]: Property value
  [TpmSupport <String>]: <p>If the instance is configured for NitroTPM support, the value is <code>v2.0</code>. For more information, see <a href='https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/nitrotpm.html'>NitroTPM</a> in the <i>Amazon EC2 User Guide</i>.</p>
  [UsageOperation <String>]: <p>The usage operation value for the instance. For more information, see <a href='https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/billing-info-fields.html'>AMI billing information fields</a> in the <i>Amazon EC2 User Guide</i>.</p>
  [UsageOperationUpdateTime <DateTime?>]: <p>The time that the usage operation was last updated.</p>
  [VirtualizationTypeValue <VirtualizationType?>]: Property value
  [VpcId <String>]: <p>The ID of the VPC in which the instance is running.</p>
.Link
https://learn.microsoft.com/powershell/module/az.awsconnector/new-azawsconnectorec2instance
#>
function New-AzAwsConnectorEc2Instance {
[OutputType([Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Models.Api20241201.IEc2Instance])]
[CmdletBinding(DefaultParameterSetName='CreateExpanded', PositionalBinding=$false, SupportsShouldProcess, ConfirmImpact='Medium')]
param(
    [Parameter(Mandatory)]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Path')]
    [System.String]
    # The fully qualified Azure Resource manager identifier of the resource.
    ${ResourceUri},

    [Parameter()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Body')]
    [System.String]
    # Amazon Resource Name (ARN)
    ${Arn},

    [Parameter()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Body')]
    [System.String]
    # AWS Account ID
    ${AwsAccountId},

    [Parameter()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Body')]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Models.Api20241201.IAwsEc2InstanceProperties]
    # AWS Properties
    # To construct, see NOTES section for AWSPROPERTY properties and create a hash table.
    ${AwsProperty},

    [Parameter()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Body')]
    [System.String]
    # AWS Region
    ${AwsRegion},

    [Parameter()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Body')]
    [System.String]
    # AWS Source Schema
    ${AwsSourceSchema},

    [Parameter()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Body')]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Runtime.Info(PossibleTypes=([Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Models.Api20241201.IEc2InstancePropertiesAwsTags]))]
    [System.Collections.Hashtable]
    # AWS Tags
    ${AwsTag},

    [Parameter()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Body')]
    [System.String]
    # Public Cloud Connectors Resource ID
    ${PublicCloudConnectorsResourceId},

    [Parameter()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Body')]
    [System.String]
    # Public Cloud Resource Name
    ${PublicCloudResourceName},

    [Parameter()]
    [Alias('AzureRMContext', 'AzureCredential')]
    [ValidateNotNull()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Azure')]
    [System.Management.Automation.PSObject]
    # The DefaultProfile parameter is not functional.
    # Use the SubscriptionId parameter when available if executing the cmdlet against a different subscription.
    ${DefaultProfile},

    [Parameter()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Runtime')]
    [System.Management.Automation.SwitchParameter]
    # Run the command as a job
    ${AsJob},

    [Parameter(DontShow)]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Runtime')]
    [System.Management.Automation.SwitchParameter]
    # Wait for .NET debugger to attach
    ${Break},

    [Parameter(DontShow)]
    [ValidateNotNull()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Runtime')]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Runtime.SendAsyncStep[]]
    # SendAsync Pipeline Steps to be appended to the front of the pipeline
    ${HttpPipelineAppend},

    [Parameter(DontShow)]
    [ValidateNotNull()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Runtime')]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Runtime.SendAsyncStep[]]
    # SendAsync Pipeline Steps to be prepended to the front of the pipeline
    ${HttpPipelinePrepend},

    [Parameter()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Runtime')]
    [System.Management.Automation.SwitchParameter]
    # Run the command asynchronously
    ${NoWait},

    [Parameter(DontShow)]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Runtime')]
    [System.Uri]
    # The URI for the proxy server to use
    ${Proxy},

    [Parameter(DontShow)]
    [ValidateNotNull()]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Runtime')]
    [System.Management.Automation.PSCredential]
    # Credentials for a proxy server to use for the remote call
    ${ProxyCredential},

    [Parameter(DontShow)]
    [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Category('Runtime')]
    [System.Management.Automation.SwitchParameter]
    # Use the default credentials for the proxy
    ${ProxyUseDefaultCredentials}
)

begin {
    try {
        $outBuffer = $null
        if ($PSBoundParameters.TryGetValue('OutBuffer', [ref]$outBuffer)) {
            $PSBoundParameters['OutBuffer'] = 1
        }
        $parameterSet = $PSCmdlet.ParameterSetName

        if ($null -eq [Microsoft.WindowsAzure.Commands.Utilities.Common.AzurePSCmdlet]::PowerShellVersion) {
            [Microsoft.WindowsAzure.Commands.Utilities.Common.AzurePSCmdlet]::PowerShellVersion = $PSVersionTable.PSVersion.ToString()
        }         
        $preTelemetryId = [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::TelemetryId
        if ($preTelemetryId -eq '') {
            [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::TelemetryId =(New-Guid).ToString()
            [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.module]::Instance.Telemetry.Invoke('Create', $MyInvocation, $parameterSet, $PSCmdlet)
        } else {
            $internalCalledCmdlets = [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::InternalCalledCmdlets
            if ($internalCalledCmdlets -eq '') {
                [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::InternalCalledCmdlets = $MyInvocation.MyCommand.Name
            } else {
                [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::InternalCalledCmdlets += ',' + $MyInvocation.MyCommand.Name
            }
            [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::TelemetryId = 'internal'
        }

        $mapping = @{
            CreateExpanded = 'Az.AwsConnector.private\New-AzAwsConnectorEc2Instance_CreateExpanded';
        }
        $cmdInfo = Get-Command -Name $mapping[$parameterSet]
        [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Runtime.MessageAttributeHelper]::ProcessCustomAttributesAtRuntime($cmdInfo, $MyInvocation, $parameterSet, $PSCmdlet)
        if ($null -ne $MyInvocation.MyCommand -and [Microsoft.WindowsAzure.Commands.Utilities.Common.AzurePSCmdlet]::PromptedPreviewMessageCmdlets -notcontains $MyInvocation.MyCommand.Name -and [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Runtime.MessageAttributeHelper]::ContainsPreviewAttribute($cmdInfo, $MyInvocation)){
            [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.Runtime.MessageAttributeHelper]::ProcessPreviewMessageAttributesAtRuntime($cmdInfo, $MyInvocation, $parameterSet, $PSCmdlet)
            [Microsoft.WindowsAzure.Commands.Utilities.Common.AzurePSCmdlet]::PromptedPreviewMessageCmdlets.Enqueue($MyInvocation.MyCommand.Name)
        }
        $wrappedCmd = $ExecutionContext.InvokeCommand.GetCommand(($mapping[$parameterSet]), [System.Management.Automation.CommandTypes]::Cmdlet)
        $scriptCmd = {& $wrappedCmd @PSBoundParameters}
        $steppablePipeline = $scriptCmd.GetSteppablePipeline($MyInvocation.CommandOrigin)
        $steppablePipeline.Begin($PSCmdlet)
    } catch {
        [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::ClearTelemetryContext()
        throw
    }
}

process {
    try {
        $steppablePipeline.Process($_)
    } catch {
        [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::ClearTelemetryContext()
        throw
    }

    finally {
        $backupTelemetryId = [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::TelemetryId
        $backupInternalCalledCmdlets = [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::InternalCalledCmdlets
        [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::ClearTelemetryContext()
    }

}
end {
    try {
        $steppablePipeline.End()

        [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::TelemetryId = $backupTelemetryId
        [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::InternalCalledCmdlets = $backupInternalCalledCmdlets
        if ($preTelemetryId -eq '') {
            [Microsoft.Azure.PowerShell.Cmdlets.AwsConnector.module]::Instance.Telemetry.Invoke('Send', $MyInvocation, $parameterSet, $PSCmdlet)
            [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::ClearTelemetryContext()
        }
        [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::TelemetryId = $preTelemetryId

    } catch {
        [Microsoft.WindowsAzure.Commands.Common.MetricHelper]::ClearTelemetryContext()
        throw
    }
} 
}
